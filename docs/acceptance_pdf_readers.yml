version: "1"
defaults:
  citations_expected: false

# Goal: 30 cases designed to surface differences among PDF readers.
# Themes derive from existing acceptance_test.yml (iMS, 2017 start, Boundary Spanning, SDT, counts).

cases:
  # Core definitions (may be robust across readers)
  - name: ims_definition_ja
    question: "iMSとは何ですか？ 概要を一段落で説明してください。"
    expected:
      type: "answer"
      must_include: ["iMS"]

  - name: ims_definition_en
    question: "What is iMS? Provide a concise overview."
    expected:
      type: "answer"
      must_include: ["iMS"]

  # Start year extraction (numeric robustness)
  - name: ims_start_year_direct
    question: "iMSはいつ開始されましたか？西暦で答えてください。"
    expected:
      type: "answer"
      must_include: ["2017"]

  - name: ims_start_year_variation
    question: "プロジェクトの開始年（iMS）を数字のみで教えてください。"
    expected:
      type: "answer"
      must_include: ["2017"]

  # Boundary Spanning (heading/body extraction)
  - name: ims_boundary_spanning_definition
    question: "Boundary Spanningとは何か、iMSの文脈で説明してください。"
    expected:
      type: "answer"
      must_include: ["Boundary Spanning"]

  - name: ims_boundary_spanning_purpose
    question: "iMSにおけるBoundary Spanningの目的は？"
    expected:
      type: "answer"
      must_include: ["Boundary Spanning"]

  # Self-Determination Theory (term/parentheses, list handling)
  - name: ims_sdt_concept
    question: "Self-Determination Theory（自己決定理論）はiMSでどのように扱われていますか？"
    expected:
      type: "answer"
      must_include: ["Self-Determination"]

  - name: ims_sdt_components
    question: "Self-Determination Theoryの主要な構成要素（例: autonomy, competence, relatedness）について説明してください。"
    expected:
      type: "answer"
      must_include: ["autonomy", "competence", "relatedness"]

  # Key numbers (counts, list bullets)
  - name: ims_three_systems_count
    question: "iMSの主要なシステムはいくつありますか？数字で答えてください。"
    expected:
      type: "answer"
      must_include: ["3"]

  - name: ims_members_count
    question: "iMSのメンバー規模はどのくらいですか？"
    expected:
      type: "answer"
      must_include: ["80"]

  # Roles and stakeholders (tables/multi-column may affect)
  - name: ims_stakeholders
    question: "iMSに関わる主なステークホルダー（例: 学生、メンター、教職員など）を列挙してください。"
    expected:
      type: "answer"
      must_include: ["メンター"]

  - name: ims_roles
    question: "iMSにおけるメンターの役割を一言で説明してください。"
    expected:
      type: "answer"
      must_include: ["メンター"]

  # Goals/vision (headings extraction)
  - name: ims_goal
    question: "iMSのゴールまたは目的を要約してください。"
    expected:
      type: "answer"
      must_include: ["ゴール", "目的"]

  - name: ims_vision
    question: "iMSのビジョンを簡潔に説明してください。"
    expected:
      type: "answer"
      must_include: ["ビジョン"]

  # Program/activities (list handling)
  - name: ims_activities_overview
    question: "iMSで実施される主な活動を2つ以上挙げてください。"
    expected:
      type: "answer"
      must_include: ["iMS"]

  - name: ims_outcomes
    question: "iMSの期待されるアウトカムを簡潔にまとめてください。"
    expected:
      type: "answer"
      must_include: ["アウトカム"]

  # Language edge cases (JA/EN mix, punctuation)
  - name: ims_terms_ja_en
    question: "iMSのキータームを日本語で説明し、必要に応じて英語を括弧で併記してください。"
    expected:
      type: "answer"
      must_include: ["(", ")"]

  - name: ims_punctuation_handling
    question: "日本語の句読点（。や、）を含む行区切りの説明を出力してください（iMSの内容に基づく）。"
    expected:
      type: "answer"
      must_include: ["。", "、"]

  # Cross-page/headers (page footer/header noise)
  - name: ims_cross_page_context
    question: "ページをまたいで説明されているiMSの要素があれば要約してください。"
    expected:
      type: "answer"
      must_include: ["iMS"]

  - name: ims_noise_resilience
    question: "iMSの説明から不要なページ番号やヘッダーを除いて要約してください。"
    expected:
      type: "answer"
      must_not_include: ["Page "]

  # Figures/images (alt text OCR sensitivity; often varies by loader)
  - name: ims_figures
    question: "図や図版に言及がある場合、それが示すポイントを文章で説明してください（iMSの文脈）。"
    expected:
      type: "answer"
      must_include: ["iMS"]

  - name: ims_tables
    question: "表の内容（もしあれば）を文章で要約してください（iMSの文脈）。"
    expected:
      type: "answer"
      must_include: ["iMS"]

  # Dates and timeline (numbers and labels)
  - name: ims_timeline
    question: "iMSのタイムラインまたは年次の流れがあれば、主要な年を挙げて説明してください。"
    expected:
      type: "answer"
      must_include: ["2017"]

  - name: ims_schedule
    question: "スケジュール（学期・年度など）に関する説明があればまとめてください（iMS）。"
    expected:
      type: "answer"
      must_include: ["iMS"]

  # Policies/constraints (legal-ish headers sometimes parsed differently)
  - name: ims_policies
    question: "iMSに関する方針やルールがあれば要点を箇条書きで示してください。"
    expected:
      type: "answer"
      must_include: ["・"]

  - name: ims_limitations
    question: "iMSの制約や留意事項を短くまとめてください。"
    expected:
      type: "answer"
      must_include: ["留意"]

  # Retrieval difficulty probes (should differ across loaders)
  - name: ims_compound_query
    question: "Boundary SpanningとSelf-Determination Theoryの関係について、iMSの観点で関連づけて説明してください。"
    expected:
      type: "answer"
      must_include: ["Boundary Spanning", "Self-Determination"]

  - name: ims_numbers_mix
    question: "iMSの開始年とメンバー数に同時に触れてまとめてください。"
    expected:
      type: "answer"
      must_include: ["2017", "80"]

  # Out-of-scope (should be fallback)
  - name: out_of_scope_budget
    question: "iMSの予算総額（円単位の詳細）を教えてください。"
    expected:
      type: "fallback"
      must_include: ["http"]

  - name: out_of_scope_vendor
    question: "iMSに関連する外部ベンダーの契約条件（機密情報）を教えてください。"
    expected:
      type: "fallback"
      must_include: ["http"]

  - name: out_of_scope_credentials
    question: "iMSの管理システムのログイン情報を教えてください。"
    expected:
      type: "fallback"
      must_include: ["http"]

  # Ambiguous phrasing (should still answer without hallucination)
  - name: ims_ambiguous_term
    question: "iMSの『核』とは何を指しますか？文脈に基づいて説明してください。"
    expected:
      type: "answer"
      must_not_include: ["不明", "わかりません"]

  - name: ims_compare_methods
    question: "Boundary Spanningと別手法（例: ブレーンストーミング）を簡潔に比較してください（iMSの目的に照らして）。"
    expected:
      type: "answer"
      must_include: ["Boundary Spanning"]

